# build.ninja generated by blade
ninja_required_version = 1.7
builddir = build64_debug

pool heavy_pool
  depth = 1

rule copy
  command = cp -f ${in} ${out}
  description = [2;35mCOPY ${in} ${out}[0m

c_warnings = -Werror-implicit-function-declaration -Wall -Wextra -Wno-unused-parameter -Wno-unused-local-typedefs -Wno-missing-field-initializers -Wendif-labels -Wfloat-equal -Wformat=2 -Wframe-larger-than=69632 -Wmissing-include-dirs -Wpointer-arith -Wwrite-strings -Werror=char-subscripts -Werror=comments -Werror=empty-body -Werror=endif-labels -Werror=format -Werror=format-nonliteral -Werror=missing-include-dirs -Werror=overflow -Werror=parentheses -Werror=return-type -Werror=sequence-point -Werror=sign-compare -Werror=switch -Werror=type-limits -Werror=uninitialized -Werror=unused-label -Werror=unused-result -Werror=unused-value -Werror=unused-variable -Werror=write-strings
cxx_warnings = -Wno-invalid-offsetof -Wnon-virtual-dtor -Woverloaded-virtual -Wvla -Werror=conversion-null -Werror=non-virtual-dtor -Werror=overloaded-virtual -Werror=reorder -Werror=vla -Wall -Wextra -Wno-unused-parameter -Wno-unused-local-typedefs -Wno-missing-field-initializers -Wendif-labels -Wfloat-equal -Wformat=2 -Wframe-larger-than=69632 -Wmissing-include-dirs -Wpointer-arith -Wwrite-strings -Werror=char-subscripts -Werror=comments -Werror=empty-body -Werror=endif-labels -Werror=format -Werror=format-nonliteral -Werror=missing-include-dirs -Werror=overflow -Werror=parentheses -Werror=return-type -Werror=sequence-point -Werror=sign-compare -Werror=switch -Werror=type-limits -Werror=uninitialized -Werror=unused-label -Werror=unused-result -Werror=unused-value -Werror=unused-variable -Werror=write-strings
optimize_flags = -O2
optimize = 

rule cc
  command = gcc -o ${out} -MMD -MF ${out}.d -c -fPIC  -pipe -fno-omit-frame-pointer -g -fstack-protector -D_FILE_OFFSET_BITS=64 -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS ${optimize} ${c_warnings} ${cppflags} -I. -Ibuild64_debug ${includes} ${in}
  description = [2;35mCC ${in}[0m
  depfile = ${out}.d
  deps = gcc

rule cxx
  command = g++ -o ${out} -MMD -MF ${out}.d -c -fPIC  -pipe -fno-omit-frame-pointer -g -fstack-protector -D_FILE_OFFSET_BITS=64 -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS ${optimize} ${cxx_warnings} ${cppflags} -I. -Ibuild64_debug ${includes} ${in}
  description = [2;35mCXX ${in}[0m
  depfile = ${out}.d
  deps = gcc

rule cchdrs
  command = gcc -fdirectives-only -o /dev/null -E -H  -pipe -fno-omit-frame-pointer -g -fstack-protector -D_FILE_OFFSET_BITS=64 -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -w ${cppflags} -I. -Ibuild64_debug ${includes} ${in} 2> ${out} || gcc -o /dev/null -E -H  -pipe -fno-omit-frame-pointer -g -fstack-protector -D_FILE_OFFSET_BITS=64 -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -w ${cppflags} -I. -Ibuild64_debug ${includes} ${in} 2> ${out}
  description = [2;35mCC HDRS ${in}[0m

rule cxxhdrs
  command = g++ -fdirectives-only -o /dev/null -E -H  -pipe -fno-omit-frame-pointer -g -fstack-protector -D_FILE_OFFSET_BITS=64 -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -w ${cppflags} -I. -Ibuild64_debug ${includes} ${in} 2> ${out} || g++ -o /dev/null -E -H  -pipe -fno-omit-frame-pointer -g -fstack-protector -D_FILE_OFFSET_BITS=64 -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -w ${cppflags} -I. -Ibuild64_debug ${includes} ${in} 2> ${out}
  description = [2;35mCXX HDRS ${in}[0m

rule securecccompile
  command = None g++ -o ${out} -c -fPIC  -pipe -fno-omit-frame-pointer -g -fstack-protector -D_FILE_OFFSET_BITS=64 -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS ${optimize} ${cxx_warnings} ${cppflags} -I. -Ibuild64_debug ${includes} ${in}
  description = [2;35mSECURECC ${in}[0m

rule securecc
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools securecc_object ${out} ${in}
  description = [2;35mSECURECC ${in}[0m
  restat = 1

rule ar
  command = rm -f $out; ar rcs $out $in
  description = [2;35mAR ${out}[0m

rule link
  command = g++ -o ${out}  ${ldflags} ${in} ${extra_ldflags}
  description = [2;35mLINK ${out}[0m

rule solink
  command = g++ -o ${out} -shared  ${ldflags} ${in} ${extra_ldflags}
  description = [2;35mSHAREDLINK ${out}[0m

rule strip
  command = strip --strip-unneeded -o ${out} ${in}
  description = [2;35mSTRIP ${out}[0m

protocflags =
protoccpppluginflags =
protocjavapluginflags =
protocpythonpluginflags =

rule proto
  command = thirdparty/protobuf/bin/protoc --proto_path=. -I=thirdparty -I=`dirname ${in}` --cpp_out=build64_debug ${protocflags} ${protoccpppluginflags} ${in}
  description = [2;35mPROTOC ${in}[0m

rule protojava
  command = thirdparty/protobuf/bin/protoc --proto_path=. -I=thirdparty --java_out=build64_debug/`dirname ${in}` ${protocjavapluginflags} ${in}
  description = [2;35mPROTOCJAVA ${in}[0m

rule protopython
  command = thirdparty/protobuf/bin/protoc --proto_path=. -I=thirdparty -I=`dirname ${in}` --python_out=build64_debug ${protocpythonpluginflags} ${in}
  description = [2;35mPROTOCPYTHON ${in}[0m

rule protodescriptors
  command = thirdparty/protobuf/bin/protoc --proto_path=. -I=thirdparty -I=`dirname ${first}` --descriptor_set_out=${out} --include_imports --include_source_info ${in}
  description = [2;35mPROTODESCRIPTORS ${in}[0m

rule resource_index
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools resource_index ${name} ${path} ${out} ${in}
  description = [2;35mRESOURCE INDEX ${out}[0m

rule resource
  command = xxd -i ${in} | sed -e "s/^unsigned char /const char RESOURCE_/g" -e "s/^unsigned int /const unsigned int RESOURCE_/g" > ${out}
  description = [2;35mRESOURCE ${in}[0m

source_encoding = UTF-8
classpath = .
javacflags =

rule javac
  command = rm -fr ${classes_dir} && mkdir -p ${classes_dir} && javac -encoding ${source_encoding} -d ${classes_dir} -classpath ${classpath} ${javacflags} ${in} && sleep 0.01 && jar cf ${out} -C ${classes_dir} .
  description = [2;35mJAVAC ${out}[0m

rule javaresource
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools java_resource ${out} ${in}
  description = [2;35mJAVA RESOURCE ${in}[0m

rule javajar
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools java_jar jar ${out} ${in}
  description = [2;35mJAVA JAR ${out}[0m

rule javatest
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools java_test --script=${out} --main_class=${mainclass} --jacocoagent= --packages_under_test=${packages_under_test} ${in}
  description = [2;35mJAVA TEST ${out}[0m

rule fatjar
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools java_fatjar ${out} ${in}
  description = [2;35mFAT JAR ${out}[0m

rule onejar
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools java_onejar --onejar=${out} --bootjar= --main_class=${mainclass} ${in}
  description = [2;35mONE JAR ${out}[0m

rule javabinary
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools java_binary ${out} ${in}
  description = [2;35mJAVA BIN ${out}[0m

scalacflags = -nowarn

rule scalac
  command = JAVACMD=java scalac -encoding UTF8 -d ${out} -classpath ${classpath} ${scalacflags} ${in}
  description = [2;35mSCALAC ${out}[0m

rule scalatest
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools scala_test --java=java --scala=scala --jacocoagent= --packages_under_test=${packages_under_test} --script=${out} ${in}
  description = [2;35mSCALA TEST ${out}[0m

rule thrift
  command = /usr/local/bin/thrift --gen cpp:include_prefix,pure_enums -I .  -I `dirname ${in}` -out build64_debug/`dirname ${in}` ${in}
  description = [2;35mTHRIFT ${in}[0m

rule pythonlibrary
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools python_library --basedir=${basedir} --pylib=${out} ${in}
  description = [2;35mPYTHON LIBRARY ${out}[0m

rule pythonbinary
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools python_binary --basedir=${basedir} --exclusions=${exclusions} --mainentry=${mainentry} --pybin=${out} ${in}
  description = [2;35mPYTHON BINARY ${out}[0m

rule shelltest
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools shell_test ${out} ${in}
  description = [2;35mSHELL TEST ${out}[0m

rule shelltestdata
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools shell_testdata ${out} ${in} ${testdata}
  description = [2;35mSHELL TEST DATA ${out}[0m

rule lex
  command = flex ${lexflags} -o ${out} ${in}
  description = [2;35mLEX ${in}[0m

rule yacc
  command = bison ${yaccflags} -o ${out} ${in}
  description = [2;35mYACC ${in}[0m

rule package
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools package ${out} ${in} ${entries}
  description = [2;35mPACKAGE ${out}[0m

rule package_tar
  command = tar -c -f ${out} ${tarflags} -C ${packageroot} ${entries}
  description = [2;35mTAR ${out}[0m

rule package_zip
  command = cd ${packageroot} && zip -q temp_archive.zip ${entries} && cd - && mv ${packageroot}/temp_archive.zip ${out}
  description = [2;35mZIP ${out}[0m

rule scm
  command = PYTHONPATH=/Users/bytedance/Desktop/study/blade-build/src:$$PYTHONPATH /System/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -m blade.builtin_tools scm --scm=${out} --revision=${revision} --url=${url} --profile=${profile} --compiler="${compiler}"
  description = [2;35mSCM ${out}[0m

build build64_debug/scm.cc: scm
  revision = c68e59aa63a52f977cb015fdf7d16679c92ece24
  url = git@github.com:Basket-of-Charcoal/MachineLearning.git
  profile = debug
  compiler = gcc 12.0.0

build build64_debug/scm.cc.o: cxx build64_debug/scm.cc
  cppflags = -w -O2
  cxx_warnings =

include build64_debug/compute_graph/unit_test_all.build.ninja
